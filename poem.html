<html>
<link rel="stylesheet" type="text/css" href="fonts/fonts.css" />
<style>
    body { font-family: Quattrocento; background-color: black; color: whitesmoke; line-height: 1.25rem; }
    #container { display: flex; flex-direction: row; justify-content: center; }
    #container-parent { display: flex; flex-direction: column; justify-content: center; min-height: calc(100% - 31px); }
</style>
<script src="scripts/marked.min.js"></script>
<script>
    async function onLoad() {
        var params = new URLSearchParams(window.location.search);
        var title = params.get("title");
        var root_url = `https://raw.githubusercontent.com/culturing/Poems/main`;
        
        var text_url = `${root_url}/Poems/${title}.md`;

        var res = await fetch(text_url);
        var md = await res.text();

        var container = document.getElementById('container');

        var div = document.createElement('div');
        div.innerHTML = marked(md);

        var audio_url = `${root_url}/Audio/${title}.m4a`;
        res = await fetch(audio_url)
        if (res.ok)
        {
            var audio = document.createElement('audio');
            audio.controls = true;
            audio.src = audio_url;
            audio.style = "width: 100%";
            div.appendChild(audio);
        }

        container.appendChild(div);
    }
    onLoad();
    
    console.log("Like looking under the hood? https://github.com/culturing/Poems");
</script>

<body>
    <div id="container-parent">
        <div id="container"></div>
    </div>
    <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a>
</body>
</html>